{% extends "base/base.html" %}

{% block title %}Care{% endblock %}


{% block content %}

  <center><h3>Balance</h3></center>

<div class="container">   
  <div class="col-sm-12" align="center">
    {% if myTotalBalanceFloat < 0.0 %} 
    <font style="color:red">
    {% else %}
    <font style="color:green">
    {% endif %}
    <h3><b>&#8364 {{ myTotalBalance }}</b> </h3>
    </font>
  </div>
</div>

<div class="row">  
  {% for group in groups %}   
  <div class="col-sm-3" align="center"> 
    <h4>{{ group.name }}</h4>
    {% if group.myBalanceFloat < 0.0 %} 
    <font style="color:red">
    {% else %}
    <font style="color:green">
    {% endif %}
    <h4>&#8364 <b>{{ group.myBalance }}</b></h4>
    </font>
  </div>
  {% endfor %}

</div>

<div class="row">
  <div class="col-sm-4 col-sm-offset-2" align="center">
  
      <h3><a href="/transactions/new/"><i class="glyphicon glyphicon-plus"></i></a> Shares</h3>
    
    {% if transactionsAll %}
    <table class="table table-striped table-hover" style="width: 95%;">

      {% for transaction in transactionsAll %}
      <tr>
        <td {% if transaction.amountPerPersonFloat <= 0.0 %} style="color:red" {% else %}
          style="color:green"
          {% endif %}>
          &#8364 {{ transaction.amountPerPerson }}
        </td>
        <td > {{ transaction.what }}</td> 
        <td>
          {% ifequal transaction.buyer.displayname displayname %}
            <b>{{ transaction.buyer }}</b>
          {% else %}
            {{ transaction.buyer }}
          {% endifequal %}
        </td>
        <td>
         {{ transaction.date|date:"j M" }}
        </td>
      </tr>
      {% endfor %}
    </table>
  
    {% else %}
      <center>
        No virtual transactions available.
      </center>
    {% endif %}
  </div>

  <div div class="col-sm-4" align="center">
    <center><h3>Transactions</h3></center>
  
    {% if transactionsRealAll %}
      <table class="table table-striped table-hover" style="width: 95%;">
      {% for transaction in transactionsRealAll %}
      <tr>
        <td {% if transaction.amountPerPersonFloat <= 0.0 %} style="color:red" {% else %}
            style="color:green"
            {% endif %}>
            &#8364 {{ transaction.amountPerPerson }}
        </td>
        <td>
        {% ifequal transaction.sender.displayname displayname %}
          <b>{{ transaction.sender }}</b>
        {% else %}
          {{ transaction.sender }}
        {% endifequal %}
        </td>
        <td>
         ->
        </td>
        <td>
          {% ifequal transaction.receiver.displayname displayname %}
            <b>{{ transaction.receiver }}</b>
          {% else %}
            {{ transaction.receiver }}
          {% endifequal %}
        </td>
                <td>
         {{ transaction.date|date:"j M" }}
        </td>
      </tr>
      {% endfor %}
      </table>
  
    {% else %}
      <center>
      <font>
        No real transactions available.
      </font>
      </center>
    {% endif %}
  </div>
  
</div>

<div id="row">
  <div id="col_right">
    <center><h4>Friends</h4></center>
    
    {% if friends %}
    <table>
      <tr>
        <th><b>Name</b></th>
      </tr>
      <tr>
        <td>
          {% for friend in friends %}
            <b>{{ friend.displayname }}</b>,
          {% endfor %}
        </td>
      </tr>
    </table>
    {% else %}
      <center>
      <font id="userMessageFont">
        No friends :(
      </font>
      </center>
    {% endif %}
  </div> 
  
  <div id="col_left">
    <center><h4>Invites</h4></center>
    
    {% if invitesAll %}
    <table>
      <tr>
        <th><b>Group</b></th>
        <th><b>Inviter</b></th>
        <th><b>Invitee</b></th>
        <th><b>Status</b></th>
      </tr>
      {% for invite in invitesAll %}
      <tr>
        <td>
          {{ invite.groupAccount }}
        </td>
        <td>
          {% ifequal invite.inviter.displayname displayname %}
            <b>{{ invite.inviter }}</b>
          {% else %}
            {{ invite.inviter }}
          {% endifequal %}
        </td>
        <td>
          {% ifequal invite.invitee.displayname displayname %}
            <b>{{ invite.invitee }}</b></font>
          {% else %}
            {{ invite.invitee }}</font>
          {% endifequal %}
        </td>
        {% if invite.isAccepted %}
          <td style="color:green"> <b>Accepted</b> </td>
        {% elif invite.isDeclined %}
          <td style="color:red"> <b>Declined</b> </td>
        {% else %}
          <td > 
            <b>Open</b>
          </td>
        {% endif %}
      </tr>
      {% endfor %}
    </table>
    
    {% else %}
      <center>
      <font id="userMessageFont">
        No invites.
      </font>
      </center>
    {% endif %}
    
  </div> 
</div> 
{% endblock %}