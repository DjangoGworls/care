{% extends "base/base.html" %}

{% block title %}Care{% endblock %}

{% load bootstrap3 %}
{% block content %}

<div class="subnav subnav subnav-fixed-top">
  <div class="container">
    <ul class="nav navbar-nav">
      <li><a href="/transactions/new"><b class="text-info">{% bootstrap_icon "plus" %}<font style="padding-left:0.5em;">New share</font></b></a></li>
      <li><a href="/transactionsreal/new"><b class="text-info">{% bootstrap_icon "plus" %}<font style="padding-left:0.5em;">New transaction</font></b></a></li>
    </ul>
  </div>
</div>

  <center></center>

<div class="container" >   
  <div class="row"> 
    <div class="col-sm-4 col-sm-offset-4" align="center" >
      <h4>Balance</h4>
      {% if myTotalBalanceFloat < 0.0 %} 
      <font style="color:red">
      {% else %}
      <font style="color:green">
      {% endif %}
      <h3><b>&#8364 {{ myTotalBalance }}</b> </h3>
      </font>
    </div>
  </div>
</div>

<hr>

<div class="row">  
  <div class="col-md-4 col-sm-offset-4" align="center">
  
    <div class="panel panel-primary">
      <div class="panel-heading">Per group</div>
        <div class="panel-body">
          
          <table class="table table-striped table-hover">
          {% for group in groups %}   
          <tr>
            <td>{{ group.name }}</td>
            <td>
              {% if group.myBalanceFloat < 0.0 %} 
              <font style="color:red">
              {% else %}
              <font style="color:green">
              {% endif %}
              &#8364 <b>{{ group.myBalance }}</b>
              </font>
            </td>
          </tr>
          {% endfor %}
          
          </table>
        
        </div>
      </div>
    </div>
  
  </div>
</div>

<div class="row">
  <div class="col-sm-5 col-sm-offset-1" align="center">
  
    {% if transactionsAll %}
    <div class="panel panel-primary">
      <div class="panel-heading">Shares</div>
        <div class="panel-body">
        <table class="table table-striped table-hover">
  
        {% for transaction in transactionsAll %}
          <tr>
            <td {% if transaction.amountPerPersonFloat <= 0.0 %} style="color:red" {% else %}
              style="color:green"
              {% endif %}>
              &#8364 {{ transaction.amountPerPerson }}
            </td>
            <td > {{ transaction.what }}</td> 
            <td>
              {% ifequal transaction.buyer.displayname displayname %}
                <b>{{ transaction.buyer }}</b>
              {% else %}
                {{ transaction.buyer }}
              {% endifequal %}
            </td>
    
          </tr>
        {% endfor %}
        
        </table>
      </div>
    </div>
  </div>
  
    {% else %}
      <center>
        No virtual transactions available.
      </center>
    {% endif %}


  <div div class="col-sm-5 col-sm-offset-1" align="center">
  
    {% if transactionsRealAll %}
    <div class="panel panel-primary">
      <div class="panel-heading">Transactions</div>
      <div class="panel-body">
        <table class="table table-striped table-hover" style="width: 100%;">
  
        {% for transaction in transactionsRealAll %}      
      
          <tr>
            <td {% if transaction.amountPerPersonFloat <= 0.0 %} style="color:red" {% else %}
                style="color:green"
                {% endif %}>
                &#8364 {{ transaction.amountPerPerson }}
            </td>
            <td>
            {% ifequal transaction.sender.displayname displayname %}
              <b>{{ transaction.sender }}</b>
            {% else %}
              {{ transaction.sender }}
            {% endifequal %}
            </td>
            <td>
             ->
            </td>
            <td>
              {% ifequal transaction.receiver.displayname displayname %}
                <b>{{ transaction.receiver }}</b>
              {% else %}
                {{ transaction.receiver }}
              {% endifequal %}
            </td>
          </tr>
        {% endfor %}
        
        </table>
      </div>
    </div>
  </div>
  
  {% else %}
    <h4>No real transactions available.</h4>
  {% endif %}
  
</div>

<div id="row">
  <div id="col_right">
    <center><h4>Friends</h4></center>
    
    {% if friends %}
    <table>
      <tr>
        <th><b>Name</b></th>
      </tr>
      <tr>
        <td>
          {% for friend in friends %}
            <b>{{ friend.displayname }}</b>,
          {% endfor %}
        </td>
      </tr>
    </table>
    {% else %}
      <center>
      <font id="userMessageFont">
        No friends :(
      </font>
      </center>
    {% endif %}
  </div> 
  
  <div id="col_left">
    <center><h4>Invites</h4></center>
    
    {% if invitesAll %}
    <table>
      <tr>
        <th><b>Group</b></th>
        <th><b>Inviter</b></th>
        <th><b>Invitee</b></th>
        <th><b>Status</b></th>
      </tr>
      {% for invite in invitesAll %}
      <tr>
        <td>
          {{ invite.groupAccount }}
        </td>
        <td>
          {% ifequal invite.inviter.displayname displayname %}
            <b>{{ invite.inviter }}</b>
          {% else %}
            {{ invite.inviter }}
          {% endifequal %}
        </td>
        <td>
          {% ifequal invite.invitee.displayname displayname %}
            <b>{{ invite.invitee }}</b></font>
          {% else %}
            {{ invite.invitee }}</font>
          {% endifequal %}
        </td>
        {% if invite.isAccepted %}
          <td style="color:green"> <b>Accepted</b> </td>
        {% elif invite.isDeclined %}
          <td style="color:red"> <b>Declined</b> </td>
        {% else %}
          <td > 
            <b>Open</b>
          </td>
        {% endif %}
      </tr>
      {% endfor %}
    </table>
    
    {% else %}
      <center>
      <font id="userMessageFont">
        No invites.
      </font>
      </center>
    {% endif %}
    
  </div> 
</div> 
{% endblock %}